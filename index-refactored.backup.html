<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basketball Scoreboard</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <div class="container">
            <!-- Header -->
            <div class="header">
                <h1>üèÄ Basketball Scoreboard</h1>
                <div class="header-controls">
                    <button class="btn btn-primary btn-small" @click="printProtocol" v-if="currentView === 'game' || currentView === 'stats' || currentView === 'protocol'">üñ®Ô∏è Print</button>
                    <button class="btn btn-primary btn-small" @click="exportToPDF" v-if="currentView === 'game' || currentView === 'stats' || currentView === 'protocol'">üì∏ PDF</button>
                    <button class="btn btn-danger btn-small" @click="resetGame" v-if="currentView === 'game'">Reset Game</button>
                    <button class="btn btn-success btn-small" @click="saveGame" v-if="currentView === 'game'">Save Game</button>
                </div>
            </div>

            <!-- Navigation Tabs -->
            <div class="tabs">
                <button class="tab" :class="{active: currentView === 'setup'}" @click="currentView = 'setup'">
                    ‚öôÔ∏è Setup
                </button>
                <button class="tab" :class="{active: currentView === 'game'}" @click="currentView = 'game'" :disabled="!gameReady">
                    üéÆ Game
                </button>
                <button class="tab" :class="{active: currentView === 'stats'}" @click="currentView = 'stats'">
                    üìä Stats
                </button>
                <button class="tab" :class="{active: currentView === 'protocol'}" @click="currentView = 'protocol'" :disabled="!gameReady">
                    üìã Protocol
                </button>
            </div>

            <!-- Content Area -->
            <div class="content">
                <!-- Setup View -->
                <div class="view" :class="{active: currentView === 'setup'}">
                    <div class="team-setup">
                        <!-- Team A -->
                        <div class="team-panel team-a">
                            <h2>Team A (Home)</h2>
                            <div class="input-group">
                                <label>Team Name:</label>
                                <input type="text" v-model="teamA.name" placeholder="Enter team A name">
                            </div>
                            
                            <div class="player-list">
                                <h3>Players (Click üèÄ to put on court)</h3>
                                <div class="player-item" v-for="(player, index) in teamA.players" :key="index">
                                    <button class="btn btn-small" 
                                            :style="{background: player.onCourt ? '#10b981' : '#6b7280', color: 'white', padding: '8px 12px'}"
                                            @click="togglePlayerCourt('A', index)"
                                            title="Toggle court/bench">
                                        {{ player.onCourt ? 'üèÄ' : 'üí∫' }}
                                    </button>
                                    <input type="number" v-model="player.number" placeholder="#" style="width: 60px;">
                                    <input type="text" v-model="player.name" placeholder="Player Name">
                                    <button class="btn btn-danger btn-small" @click="removePlayer('A', index)">‚úï</button>
                                </div>
                                <button class="btn btn-primary btn-small" @click="addPlayer('A')">+ Add Player</button>
                            </div>

                            <div class="file-import">
                                <label for="importTeamA">üìÅ Import JSON</label>
                                <input type="file" id="importTeamA" @change="importTeam('A', $event)" accept=".json">
                            </div>
                            <button class="btn btn-success btn-small" @click="exportTeam('A')" style="margin-top: 10px;">
                                üíæ Export Team
                            </button>
                        </div>

                        <!-- Team B -->
                        <div class="team-panel team-b">
                            <h2>Team B (Away)</h2>
                            <div class="input-group">
                                <label>Team Name:</label>
                                <input type="text" v-model="teamB.name" placeholder="Enter team B name">
                            </div>
                            
                            <div class="player-list">
                                <h3>Players (Click üèÄ to put on court)</h3>
                                <div class="player-item" v-for="(player, index) in teamB.players" :key="index">
                                    <button class="btn btn-small" 
                                            :style="{background: player.onCourt ? '#10b981' : '#6b7280', color: 'white', padding: '8px 12px'}"
                                            @click="togglePlayerCourt('B', index)"
                                            title="Toggle court/bench">
                                        {{ player.onCourt ? 'üèÄ' : 'üí∫' }}
                                    </button>
                                    <input type="number" v-model="player.number" placeholder="#" style="width: 60px;">
                                    <input type="text" v-model="player.name" placeholder="Player Name">
                                    <button class="btn btn-danger btn-small" @click="removePlayer('B', index)">‚úï</button>
                                </div>
                                <button class="btn btn-primary btn-small" @click="addPlayer('B')">+ Add Player</button>
                            </div>

                            <div class="file-import">
                                <label for="importTeamB">üìÅ Import JSON</label>
                                <input type="file" id="importTeamB" @change="importTeam('B', $event)" accept=".json">
                            </div>
                            <button class="btn btn-success btn-small" @click="exportTeam('B')" style="margin-top: 10px;">
                                üíæ Export Team
                            </button>
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 30px;">
                        <button class="btn btn-success" @click="startGame" :disabled="!canStartGame">
                            ‚ñ∂Ô∏è Start Game
                        </button>
                    </div>
                </div>

                <!-- Game View -->
                <div class="view" :class="{active: currentView === 'game'}">
                    <!-- Period Selector -->
                    <div class="period-selector">
                        <button class="period-btn" 
                                v-for="p in 4" 
                                :key="p" 
                                :class="{active: currentPeriod === p}"
                                @click="currentPeriod = p">
                            Q{{ p }}
                        </button>
                    </div>

                    <!-- Scoreboard -->
                    <div class="scoreboard">
                        <div class="score-panel team-a">
                            <div class="team-name">{{ teamA.name || 'Team A' }}</div>
                            <div class="score">{{ teamA.score }}</div>
                            <div class="stats-grid">
                                <div class="stat-card">
                                    <div class="stat-label">Fouls</div>
                                    <div class="stat-value">{{ teamA.fouls }}</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-label">FT Made</div>
                                    <div class="stat-value">{{ teamA.freeThrowsMade }}/{{ teamA.freeThrowsTotal }}</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-label">Timeouts</div>
                                    <div class="stat-value">{{ getAvailableTimeouts('A') }}</div>
                                </div>
                            </div>
                            
                            <!-- Player Buttons -->
                            <div class="player-sections-container">
                                <div class="player-section"
                                     @drop="dropOnCourt('A', $event)"
                                     @dragover="onDragOver"
                                     @dragenter.prevent
                                     @dragleave.prevent>
                                    <div class="player-section-title">üèÄ ON COURT (Drag & Drop)</div>
                                    <div class="player-buttons">
                                        <button v-for="(player, index) in teamA.players.filter(p => p.onCourt)" 
                                                :key="'court-a-' + index"
                                                class="player-btn"
                                                :class="{selected: isPlayerSelected('A', player)}"
                                                draggable="true"
                                                @dragstart="startDrag('A', teamA.players.indexOf(player), $event)"
                                                @dragover.prevent
                                                @drop="dropOnPlayer('A', teamA.players.indexOf(player), $event)"
                                                @dragend="clearDragState"
                                                @click="selectPlayerByIndex('A', teamA.players.indexOf(player))">
                                            <span class="player-number">#{{ player.number }}</span>
                                            <span class="player-name">{{ getLastName(player.name) }}</span>
                                        </button>
                                    </div>
                                </div>

                                <div class="player-section" 
                                     v-if="teamA.players.filter(p => !p.onCourt).length > 0"
                                     @drop="dropOnBench('A', $event)"
                                     @dragover="onDragOver"
                                     @dragenter.prevent
                                     @dragleave.prevent>
                                    <div class="player-section-title">üí∫ RESERVES</div>
                                    <div class="player-buttons">
                                        <button v-for="(player, index) in teamA.players.filter(p => !p.onCourt)" 
                                                :key="'bench-a-' + index"
                                                class="player-btn"
                                                :class="{selected: isPlayerSelected('A', player)}"
                                                draggable="true"
                                                @dragstart="startDrag('A', teamA.players.indexOf(player), $event)"
                                                @dragover.prevent
                                                @drop="dropOnPlayer('A', teamA.players.indexOf(player), $event)"
                                                @dragend="clearDragState"
                                                @click="selectPlayerByIndex('A', teamA.players.indexOf(player))">
                                            <span class="player-number">#{{ player.number }}</span>
                                            <span class="player-name">{{ getLastName(player.name) }}</span>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Action Buttons Team A -->
                            <div class="action-grid">
                                <button class="action-btn points-1" @click="addPoints('A', 1)">üéØ +1</button>
                                <button class="action-btn points-2" @click="addPoints('A', 2)">üèÄ +2</button>
                                <button class="action-btn points-3" @click="addPoints('A', 3)">üöÄ +3</button>
                                <button class="action-btn foul" @click="addFoul('A')">‚ö†Ô∏è Foul</button>
                                <button class="action-btn free-throw" @click="addFreeThrow('A', true)">‚úÖ FT Made</button>
                                <button class="action-btn free-throw" @click="addFreeThrow('A', false)">‚ùå FT Miss</button>
                                <button class="action-btn" 
                                        style="background: #ff9800; color: white;"
                                        @click="addTimeout('A')"
                                        :disabled="!canAddTimeout('A')">
                                    ‚è∏Ô∏è TO ({{ getAvailableTimeouts('A') }})
                                </button>
                            </div>
                        </div>

                        <div class="score-panel team-b">
                            <div class="team-name">{{ teamB.name || 'Team B' }}</div>
                            <div class="score">{{ teamB.score }}</div>
                            <div class="stats-grid">
                                <div class="stat-card">
                                    <div class="stat-label">Fouls</div>
                                    <div class="stat-value">{{ teamB.fouls }}</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-label">FT Made</div>
                                    <div class="stat-value">{{ teamB.freeThrowsMade }}/{{ teamB.freeThrowsTotal }}</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-label">Timeouts</div>
                                    <div class="stat-value">{{ getAvailableTimeouts('B') }}</div>
                                </div>
                            </div>
                            
                            <!-- Player Buttons -->
                            <div class="player-sections-container">
                                <div class="player-section"
                                     @drop="dropOnCourt('B', $event)"
                                     @dragover="onDragOver"
                                     @dragenter.prevent
                                     @dragleave.prevent>
                                    <div class="player-section-title">üèÄ ON COURT (Drag & Drop)</div>
                                    <div class="player-buttons">
                                        <button v-for="(player, index) in teamB.players.filter(p => p.onCourt)" 
                                                :key="'court-b-' + index"
                                                class="player-btn"
                                                :class="{selected: isPlayerSelected('B', player)}"
                                                draggable="true"
                                                @dragstart="startDrag('B', teamB.players.indexOf(player), $event)"
                                                @dragover.prevent
                                                @drop="dropOnPlayer('B', teamB.players.indexOf(player), $event)"
                                                @dragend="clearDragState"
                                                @click="selectPlayerByIndex('B', teamB.players.indexOf(player))">
                                            <span class="player-number">#{{ player.number }}</span>
                                            <span class="player-name">{{ getLastName(player.name) }}</span>
                                        </button>
                                    </div>
                                </div>

                                <div class="player-section" 
                                     v-if="teamB.players.filter(p => !p.onCourt).length > 0"
                                     @drop="dropOnBench('B', $event)"
                                     @dragover="onDragOver"
                                     @dragenter.prevent
                                     @dragleave.prevent>
                                    <div class="player-section-title">üí∫ RESERVES</div>
                                    <div class="player-buttons">
                                        <button v-for="(player, index) in teamB.players.filter(p => !p.onCourt)" 
                                                :key="'bench-b-' + index"
                                                class="player-btn"
                                                :class="{selected: isPlayerSelected('B', player)}"
                                                draggable="true"
                                                @dragstart="startDrag('B', teamB.players.indexOf(player), $event)"
                                                @dragover.prevent
                                                @drop="dropOnPlayer('B', teamB.players.indexOf(player), $event)"
                                                @dragend="clearDragState"
                                                @click="selectPlayerByIndex('B', teamB.players.indexOf(player))">
                                            <span class="player-number">#{{ player.number }}</span>
                                            <span class="player-name">{{ getLastName(player.name) }}</span>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Action Buttons Team B -->
                            <div class="action-grid">
                                <button class="action-btn points-1" @click="addPoints('B', 1)">üéØ +1</button>
                                <button class="action-btn points-2" @click="addPoints('B', 2)">üèÄ +2</button>
                                <button class="action-btn points-3" @click="addPoints('B', 3)">üöÄ +3</button>
                                <button class="action-btn foul" @click="addFoul('B')">‚ö†Ô∏è Foul</button>
                                <button class="action-btn free-throw" @click="addFreeThrow('B', true)">‚úÖ FT Made</button>
                                <button class="action-btn free-throw" @click="addFreeThrow('B', false)">‚ùå FT Miss</button>
                                <button class="action-btn" 
                                        style="background: #ff9800; color: white;"
                                        @click="addTimeout('B')"
                                        :disabled="!canAddTimeout('B')">
                                    ‚è∏Ô∏è TO ({{ getAvailableTimeouts('B') }})
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Game Log -->
                    <div class="game-log">
                        <h3>Game Log</h3>
                        <table class="log-table">
                            <thead>
                                <tr>
                                    <th>Q</th>
                                    <th>Time</th>
                                    <th>Team</th>
                                    <th>Player</th>
                                    <th>Action</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="(entry, index) in reversedGameLog" :key="index">
                                    <td>{{ entry.period }}</td>
                                    <td>{{ entry.time }}</td>
                                    <td>{{ entry.teamName }}</td>
                                    <td>
                                        <span v-if="entry.player">#{{ entry.player.number }} {{ entry.player.name }}</span>
                                        <span v-else>-</span>
                                    </td>
                                    <td>{{ entry.action }}</td>
                                    <td>
                                        <button class="delete-btn" @click="deleteLogEntry(index)">Delete</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Stats View -->
                <div class="view" :class="{active: currentView === 'stats'}">
                    <h2>üìä Game Statistics</h2>
                    
                    <div class="scoreboard" style="margin-top: 30px;">
                        <div class="score-panel team-a">
                            <div class="team-name">{{ teamA.name || 'Team A' }}</div>
                            <div class="score">{{ teamA.score }}</div>
                            
                            <div class="stats-grid" style="margin-top: 20px;">
                                <div class="stat-card">
                                    <div class="stat-label">PTS</div>
                                    <div class="stat-value">{{ teamA.score }}</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-label">Team Fouls</div>
                                    <div class="stat-value">{{ teamA.fouls }}</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-label">Free Throws</div>
                                    <div class="stat-value">{{ teamA.freeThrowsMade }}/{{ teamA.freeThrowsTotal }}</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-label">FT%</div>
                                    <div class="stat-value">{{ calculateFreeThrowPercentage('A') }}%</div>
                                </div>
                            </div>

                            <h3 style="margin-top: 20px;">Player Stats</h3>
                            <div v-for="player in teamA.players" :key="player.number" class="stat-card" style="text-align: left; margin-top: 10px;">
                                <strong>#{{ player.number }} {{ player.name }}</strong><br>
                                PTS: {{ getPlayerPoints('A', player.number) }} | 
                                Fouls: {{ getPlayerFouls('A', player.number) }}
                            </div>
                        </div>

                        <div class="score-panel team-b">
                            <div class="team-name">{{ teamB.name || 'Team B' }}</div>
                            <div class="score">{{ teamB.score }}</div>
                            
                            <div class="stats-grid" style="margin-top: 20px;">
                                <div class="stat-card">
                                    <div class="stat-label">PTS</div>
                                    <div class="stat-value">{{ teamB.score }}</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-label">Team Fouls</div>
                                    <div class="stat-value">{{ teamB.fouls }}</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-label">Free Throws</div>
                                    <div class="stat-value">{{ teamB.freeThrowsMade }}/{{ teamB.freeThrowsTotal }}</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-label">FT%</div>
                                    <div class="stat-value">{{ calculateFreeThrowPercentage('B') }}%</div>
                                </div>
                            </div>

                            <h3 style="margin-top: 20px;">Player Stats</h3>
                            <div v-for="player in teamB.players" :key="player.number" class="stat-card" style="text-align: left; margin-top: 10px;">
                                <strong>#{{ player.number }} {{ player.name }}</strong><br>
                                PTS: {{ getPlayerPoints('B', player.number) }} | 
                                Fouls: {{ getPlayerFouls('B', player.number) }}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Protocol View -->
                <div class="view" :class="{active: currentView === 'protocol'}">
                    <div class="protocol-container">
                        <!-- Protocol Header -->
                        <div class="protocol-header">
                            <h2>üèÄ BASKETBALL GAME PROTOCOL</h2>
                            <p style="color: #666; font-size: 14px;">Official Game Report</p>
                        </div>

                        <!-- Game Info -->
                        <div class="protocol-info">
                            <div class="protocol-info-item">
                                <div class="protocol-info-label">Date</div>
                                <div class="protocol-info-value">{{ currentDate }}</div>
                            </div>
                            <div class="protocol-info-item">
                                <div class="protocol-info-label">Teams</div>
                                <div class="protocol-info-value">{{ teamA.name }} vs {{ teamB.name }}</div>
                            </div>
                            <div class="protocol-info-item">
                                <div class="protocol-info-label">Final Score</div>
                                <div class="protocol-info-value">{{ teamA.score }} : {{ teamB.score }}</div>
                            </div>
                        </div>

                        <!-- Final Score Display -->
                        <div class="protocol-final-score">
                            <strong>{{ teamA.name }}</strong> {{ teamA.score }} : {{ teamB.score }} <strong>{{ teamB.name }}</strong>
                        </div>

                        <!-- Quarter Scores -->
                        <div class="protocol-section-title">üìä Quarter Scores</div>
                        <table class="protocol-table">
                            <thead>
                                <tr>
                                    <th>Team</th>
                                    <th>Q1</th>
                                    <th>Q2</th>
                                    <th>Q3</th>
                                    <th>Q4</th>
                                    <th>TOTAL</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="protocol-team-name">{{ teamA.name }}</td>
                                    <td>{{ getQuarterScore('A', 1) }}</td>
                                    <td>{{ getQuarterScore('A', 2) }}</td>
                                    <td>{{ getQuarterScore('A', 3) }}</td>
                                    <td>{{ getQuarterScore('A', 4) }}</td>
                                    <td><strong>{{ teamA.score }}</strong></td>
                                </tr>
                                <tr>
                                    <td class="protocol-team-name">{{ teamB.name }}</td>
                                    <td>{{ getQuarterScore('B', 1) }}</td>
                                    <td>{{ getQuarterScore('B', 2) }}</td>
                                    <td>{{ getQuarterScore('B', 3) }}</td>
                                    <td>{{ getQuarterScore('B', 4) }}</td>
                                    <td><strong>{{ teamB.score }}</strong></td>
                                </tr>
                            </tbody>
                        </table>

                        <!-- Two Columns: Team A and Team B Side by Side -->
                        <div class="protocol-two-columns">
                            <!-- Left Column: Team A Players -->
                            <div class="protocol-left-column">
                                <div class="protocol-section-title">üë• {{ teamA.name }} - Players</div>
                                <table class="protocol-table">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Name</th>
                                            <th>Played</th>
                                            <th>PTS</th>
                                            <th>F</th>
                                            <th>FT</th>
                                            <th>%</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="player in teamA.players" :key="player.number">
                                            <td style="font-size: 11px;"><strong>{{ player.number }}</strong></td>
                                            <td style="text-align: left; font-size: 11px;">{{ player.name }}</td>
                                            <td style="font-size: 11px;"><strong>{{ getPlayerStatus('A', player) }}</strong></td>
                                            <td style="font-size: 11px;"><strong>{{ getPlayerPoints('A', player.number) }}</strong></td>
                                            <td style="font-size: 11px;">{{ getPlayerFouls('A', player.number) }}</td>
                                            <td style="font-size: 11px;">{{ getPlayerFreeThrows('A', player.number).made }}/{{ getPlayerFreeThrows('A', player.number).total }}</td>
                                            <td style="font-size: 11px;">{{ calculatePlayerFTPercentage('A', player.number) }}</td>
                                        </tr>
                                        <tr style="background: #e3f2fd; font-weight: 700;">
                                            <td colspan="3">TOTAL</td>
                                            <td><strong>{{ teamA.score }}</strong></td>
                                            <td>{{ teamA.fouls }}</td>
                                            <td>{{ teamA.freeThrowsMade }}/{{ teamA.freeThrowsTotal }}</td>
                                            <td>{{ calculateFreeThrowPercentage('A') }}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <!-- Right Column: Team B Players -->
                            <div class="protocol-right-column">
                                <div class="protocol-section-title">üë• {{ teamB.name }} - Players</div>
                                <table class="protocol-table">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Name</th>
                                            <th>Played</th>
                                            <th>PTS</th>
                                            <th>F</th>
                                            <th>FT</th>
                                            <th>%</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="player in teamB.players" :key="player.number">
                                            <td style="font-size: 11px;"><strong>{{ player.number }}</strong></td>
                                            <td style="text-align: left; font-size: 11px;">{{ player.name }}</td>
                                            <td style="font-size: 11px;"><strong>{{ getPlayerStatus('B', player) }}</strong></td>
                                            <td style="font-size: 11px;"><strong>{{ getPlayerPoints('B', player.number) }}</strong></td>
                                            <td style="font-size: 11px;">{{ getPlayerFouls('B', player.number) }}</td>
                                            <td style="font-size: 11px;">{{ getPlayerFreeThrows('B', player.number).made }}/{{ getPlayerFreeThrows('B', player.number).total }}</td>
                                            <td style="font-size: 11px;">{{ calculatePlayerFTPercentage('B', player.number) }}</td>
                                        </tr>
                                        <tr style="background: #e3f2fd; font-weight: 700;">
                                            <td colspan="3">TOTAL</td>
                                            <td><strong>{{ teamB.score }}</strong></td>
                                            <td>{{ teamB.fouls }}</td>
                                            <td>{{ teamB.freeThrowsMade }}/{{ teamB.freeThrowsTotal }}</td>
                                            <td>{{ calculateFreeThrowPercentage('B') }}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Game Log: Two Halves Side by Side -->
                        <div class="protocol-section-title protocol-game-log-section">üìù Game Log</div>
                        <div class="protocol-two-columns protocol-game-log-content">
                            <!-- Left Column: 1st Half (Q1 + Q2) -->
                            <div class="protocol-left-column">
                                <h4 style="text-align: center; font-size: 10px; margin: 4px 0; color: #2a5298;">1ST HALF (Q1 + Q2)</h4>
                                <table class="protocol-table">
                                    <thead>
                                        <tr>
                                            <th style="width: 25px;">Q</th>
                                            <th style="width: 45px;">Time</th>
                                            <th style="width: 50px;">Team</th>
                                            <th>Player</th>
                                            <th>Action</th>
                                            <th style="width: 40px;">Score</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="(entry, index) in firstHalfLog" :key="'first-' + index">
                                            <td>{{ entry.period }}</td>
                                            <td style="font-size: 7px;">{{ entry.time }}</td>
                                            <td class="protocol-team-name" style="font-size: 7px;">{{ entry.teamName }}</td>
                                            <td style="font-size: 7px;">
                                                <span v-if="entry.player">#{{ entry.player.number }} {{ entry.player.name }}</span>
                                                <span v-else>-</span>
                                            </td>
                                            <td style="font-size: 7px;">{{ entry.action }}</td>
                                            <td style="font-size: 7px; font-weight: 700;">{{ getScoreAtLogIndex(gameLog.indexOf(entry)) }}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <!-- Right Column: 2nd Half (Q3 + Q4) -->
                            <div class="protocol-right-column">
                                <h4 style="text-align: center; font-size: 10px; margin: 4px 0; color: #2a5298;">2ND HALF (Q3 + Q4)</h4>
                                <table class="protocol-table">
                                    <thead>
                                        <tr>
                                            <th style="width: 25px;">Q</th>
                                            <th style="width: 45px;">Time</th>
                                            <th style="width: 50px;">Team</th>
                                            <th>Player</th>
                                            <th>Action</th>
                                            <th style="width: 40px;">Score</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="(entry, index) in secondHalfLog" :key="'second-' + index">
                                            <td>{{ entry.period }}</td>
                                            <td style="font-size: 7px;">{{ entry.time }}</td>
                                            <td class="protocol-team-name" style="font-size: 7px;">{{ entry.teamName }}</td>
                                            <td style="font-size: 7px;">
                                                <span v-if="entry.player">#{{ entry.player.number }} {{ entry.player.name }}</span>
                                                <span v-else>-</span>
                                            </td>
                                            <td style="font-size: 7px;">{{ entry.action }}</td>
                                            <td style="font-size: 7px; font-weight: 700;">{{ getScoreAtLogIndex(gameLog.indexOf(entry)) }}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Summary -->
                        <div class="protocol-summary">
                            <div class="protocol-summary-box">
                                <h3>{{ teamA.name }}</h3>
                                <p><strong>Points:</strong> {{ teamA.score }}</p>
                                <p><strong>Team Fouls:</strong> {{ teamA.fouls }}</p>
                                <p><strong>Free Throws:</strong> {{ teamA.freeThrowsMade }}/{{ teamA.freeThrowsTotal }} ({{ calculateFreeThrowPercentage('A') }}%)</p>
                            </div>
                            <div class="protocol-summary-box">
                                <h3>{{ teamB.name }}</h3>
                                <p><strong>Points:</strong> {{ teamB.score }}</p>
                                <p><strong>Team Fouls:</strong> {{ teamB.fouls }}</p>
                                <p><strong>Free Throws:</strong> {{ teamB.freeThrowsMade }}/{{ teamB.freeThrowsTotal }} ({{ calculateFreeThrowPercentage('B') }}%)</p>
                            </div>
                        </div>

                        <!-- Signatures -->
                        <div style="margin-top: 15px; border-top: 1px solid #ccc; padding-top: 10px;">
                            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; text-align: center;">
                                <div>
                                    <p style="margin-bottom: 20px; color: #666; font-size: 8px;">Head Referee</p>
                                    <div style="border-bottom: 1px solid #333;"></div>
                                </div>
                                <div>
                                    <p style="margin-bottom: 20px; color: #666; font-size: 8px;">Table Official</p>
                                    <div style="border-bottom: 1px solid #333;"></div>
                                </div>
                                <div>
                                    <p style="margin-bottom: 20px; color: #666; font-size: 8px;">Commissioner</p>
                                    <div style="border-bottom: 1px solid #333;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Vue.js 3 from CDN - Production Build -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <script src="app.js"></script>
</body>
</html>
